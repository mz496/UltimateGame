function get_prices(e,a){$(".price-list-inner."+e+" .table-container").append('<div class="img-loading-overlay">    <img src="/assets/fancybox_loading-b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064.gif" alt="Fancybox loading b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064" />    Loading prices...<br>'),$.post("/ajax/get_prices",{input_name:a},function(a){var i=a.results;if(0==i.length)var t='<tr><td class="empty">(none found)</td></tr>';else for(var t='<tr>        <th>Vendor</th>        <th>Price</th>        <th style="width:80px">Lowest recorded</th>      </tr>',n=0;n<i.length;n++)t+='<tr>          <td><a target="_blank" href="'+i[n].store_url+'">'+i[n].store+"</a></td>          <td>"+i[n].current_price+" ("+i[n].price_cut+")</td>          <td>"+i[n].lowest_recorded+"</td>        </tr>";$(".price-list-inner."+e+" .img-loading-overlay").remove(),$(".price-list-inner."+e+" table").append(t)})}function get_extra_info(e,a){$(".extra-info ."+e).append('<div class="img-loading-overlay">    <div class="img-loading-overlay-inner">      <img src="/assets/fancybox_loading-b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064.gif" alt="Fancybox loading b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064" />      Loading information...    </div>  </div>'),$.post("/ajax/get_extra_info",{input_name:a},function(a){var i=a.results,t=i.releasedate||"Unknown",n=i.website||"";if(i.steamid)var s="http://store.steampowered.com/app/"+i.steamid;else var s="http://store.steampowered.com";var o='<div class="col-md-6 headerimg">      <img class="extra-img" src="'+i.headerimg+'" />    </div>    <div class="col-md-6 links">      <span class="title">'+i.name+'</span>      <br><span class="btn btn-primary btn-sm">        <a href="#'+e+'-description" class="fancybox-text">Read description</a>      </span>      <ul>        <li>Released: '+t+'</li>                <li>Website:          <a target="_blank" href="'+n+'">'+n.replace("http://","").replace(/\.com\/$/,".com")+'</a>        </li>                <li>          <a target="_blank" href="'+s+'">View on Steam</a>        </li>      </ul>      <div class="description-popup" id="'+e+'-description">'+i.description+'<br><br><h1></h1><p class="legal">'+i.legal+"</p></div>    </div>";$(".extra-info ."+e+" .img-loading-overlay").remove(),$(".extra-info ."+e).append(o),$(".fancybox-text").fancybox({openEffect:"fade",closeEffect:"fade",maxWidth:600,autoWidth:!1})}).fail()}$(window).load(function(){function e(){var a='<div class="img-loading-overlay">          <div class="img-loading-overlay-inner">            Sorry, image loading failed.<br><span class="reload-inline btn btn-primary"><img src="/assets/refresh-48514ed05a37f06f8f1f2c9026a1acb1ba4954c45dec001c143ced95c4aac0a0.png" alt="Refresh 48514ed05a37f06f8f1f2c9026a1acb1ba4954c45dec001c143ced95c4aac0a0" /></span>          </div>        </div>';$("#horiz_container_outer").prepend('<div class="img-loading-overlay">      <div class="img-loading-overlay-inner">        <img src="/assets/fancybox_loading-b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064.gif" alt="Fancybox loading b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064" />        Loading images...      </div>    </div>'),$.post("/ajax/get_images",{input_name:n},function(i){for(var t=i.results,n=0;n<t.length;n++)$("#horiz_container").append('<li><a href="'+t[n]+'"          class="fancybox"          rel="game-images"          title="<a href=&quot;'+t[n]+'&quot;>View full resolution</a>">          <img src="'+t[n]+'" alt="">        </a></li>');$("#horiz_container_outer .img-loading-overlay").remove(),$(".fancybox").fancybox({prevEffect:"elastic",nextEffect:"elastic"});var s=0;$("#horiz_container").imagesLoaded(function(){$("#horiz_container li").each(function(){s+=parseInt($(this).outerWidth(!0),10)}),$("#horiz_container").css("width",s+12+"px"),$("#horiz_container_outer").horizontalScroll()}),console.log("Finished loading images"),$("#horiz_container li").length?($("#dragBar").css("display","block"),$(".reload-images").css("display","block")):($("#dragBar").hide(),$("#horiz_container_outer").prepend(a),$(".pics .reload-inline").click(function(){$(".reload-images").hide(),$("#horiz_container").empty(),$("#horiz_container_outer .img-loading-overlay").remove(),e()}),console.log("Image load error"))}).fail(function(){$("#horiz_container_outer .img-loading-overlay").remove(),$("#horiz_container_outer").prepend(a)})}function a(){$(".videos.left.sidebar").append('<div class="loading-container content">      <div class="img-loading-overlay">        <div class="img-loading-overlay-inner">          <img src="/assets/fancybox_loading-b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064.gif" alt="Fancybox loading b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064" />          Loading videos...        </div>      </div>      </div>'),$.post("/ajax/get_videos",{input_name:n},function(e){function a(e,a,i){return'<a class="fancybox-media"          rel="reviews"          href="'+e+'">          <div class="video">'+a+'<br>            <div class="video-img-container">              <img class="video-img" src="'+i+'" />            </div>          </div>        </a>'}$(".videos.left.sidebar").append('<div class="section-heading">          <span class="title">YouTube reviews</span>        </div>        <div class="content video-container"></div>'),$(".videos.right.sidebar").append('<div class="section-heading">          <span class="title">YouTube gameplay</span>        </div>        <div class="content video-container"></div>');for(var i=0;i<e.reviews.names.length;i++)$(".videos.left.sidebar .video-container").append(a(e.reviews.links[i],e.reviews.names[i],e.reviews.image_links[i]));for(var i=0;i<e.gameplay.names.length;i++)$(".videos.right.sidebar .video-container").append(a(e.gameplay.links[i],e.gameplay.names[i],e.gameplay.image_links[i]));$(".fancybox-media").fancybox({prevEffect:"none",nextEffect:"none",mouseWheel:!1,padding:0,margin:[20,60,20,60],helpers:{media:{}}}),$(".videos .img-loading-overlay").parent().remove(),console.log("Finished loading videos")}).fail(function(){$(".videos").empty(),$(".videos.left.sidebar").prepend('<div class="loading-container content">      <div class="img-loading-overlay">        <div class="img-loading-overlay-inner">          Sorry, video loading failed.<br><span class="reload-inline btn btn-primary"><img src="/assets/refresh-48514ed05a37f06f8f1f2c9026a1acb1ba4954c45dec001c143ced95c4aac0a0.png" alt="Refresh 48514ed05a37f06f8f1f2c9026a1acb1ba4954c45dec001c143ced95c4aac0a0" /></span>        </div>      </div>      </div>'),$(".videos .reload-inline").click(function(){$(".videos").empty(),$(".search-results-container").hide(),a()})}).always(function(){setTimeout(function(){$(".search-results-container").css("display","block").css("margin-top",$(".videos.left.sidebar").css("height"))},2e3)})}function i(){$(".reddit-container").append('<div class="img-loading-overlay">      <div class="img-loading-overlay-inner">        <img src="/assets/fancybox_loading-b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064.gif" alt="Fancybox loading b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064" />        Loading Reddit posts...      </div>    </div>'),$.post("/ajax/get_reddit",{input_name:n},function(e){output=e.results;for(var a="",i=0;i<output.length;i++){var t="",n="",s=new RegExp(/https?:\/\/www\.reddit\.com\/r\/([^\/]*)\//),o=new RegExp(/https?:\/\/(www\.)?([^\/]*)\//);s.test(output[i].link)?(t="http://www.reddit.com/r/"+output[i].link.match(s)[1],n="(self."+output[i].link.match(s)[1]+")"):o.test(output[i].link)&&(t="http://www.reddit.com/domain/"+output[i].link.match(o)[2],n="("+output[i].link.match(o)[2]+")"),a+='<div>          <a class="reddit-entry" target="_blank" href="'+output[i].link+'">'+output[i].name+'</a>          <a class="source" target="_blank" href="'+t+'">'+n+'</a>          <a class="comments" target="_blank" href="'+output[i].comments+'">(comments)</a>        </div>'}$(".reddit-container .img-loading-overlay").remove(),$(".reddit-container").append(a)}).fail(function(){$(".reddit-container").empty(),$(".reddit-container").append("Sorry, we couldn't fetch Reddit activity.")})}function t(){$(".search-results-container .content").append('<div class="img-loading-overlay">      <div class="img-loading-overlay-inner">        <img src="/assets/fancybox_loading-b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064.gif" alt="Fancybox loading b8681cce947f5b28ed3181b11601e2470b40811722a49564d1271e7b40015064" />        Loading results...      </div>    </div>'),$.post("/ajax/get_search_results",{input_name:n},function(e){output=e.results;for(var a="",i=0;i<output.length;i++){var t=output[i],n=new RegExp(/http:\/\/www.([^\/]*)\//);if(n.test(t)){var s=t.match(n)[1];a+='<li><a href="'+t+'" target="_blank">'+s+"</a></li>"}}$(".search-results-container .img-loading-overlay").remove(),$(".search-results-container ul").append(a)}).fail(function(){$(".search-results-container .content").empty(),$(".search-results-container .content").append("Sorry, we couldn't fetch search results.")})}var n=$(".game-name").text().replace(/\n/g,"");$(".pricing .game-entry").click(function(e){var a=$(e.target).text().replace(/[^\w\d]/g,"-").toLowerCase();$(".pricing .selected,      .extra-info .selected").removeClass("selected").addClass("unselected"),$(e.target).removeClass("unselected").addClass("selected"),$(".pricing ."+a+",      .extra-info ."+a).removeClass("unselected").addClass("selected"),$(".price-list-inner."+a+".ajax-loaded").length||($(".price-list-inner."+a).addClass("ajax-loaded"),get_prices(a,$(e.target).text()),$(e.target).hasClass("pkg")||get_extra_info(a,$(e.target).text()))}),$(".show-original").click(function(){var e=n.replace(/[^\w\d]/g,"-").toLowerCase();$(".pricing .selected,      .extra-info .selected").removeClass("selected").addClass("unselected"),$(".pricing ."+e+",      .extra-info ."+e).removeClass("unselected").addClass("selected")}),$(".reload-prices").click(function(){}),e(),$(".reload-images").click(function(){$(".reload-images").hide(),$("#dragBar").hide(),$("#horiz_container").empty(),$("#horiz_container_outer .img-loading-overlay").remove(),e()}),a(),i(),t();var s="300px";$(".collapsible").css("max-height",s).css("overflow","hidden"),$(".description-container, .reqs-container").each(function(e,a){$(a).prop("scrollHeight")<=$(a).outerHeight()&&$(a).siblings(".collapser").hide()}),$(".collapser").click(function(e){var a=$(e.target).siblings(".collapsible");a.length||(a=$(e.target).parent().siblings(".collapsible")),a.css("max-height")===s?(a.css("max-height","none"),a.siblings(".collapser").html('<img src="/assets/collapse-top-46f38d75100b6e121978dabe2a2a8c40f16d06cd4db15b3691b0cef7fd689b4b.png" alt="Collapse top 46f38d75100b6e121978dabe2a2a8c40f16d06cd4db15b3691b0cef7fd689b4b" />')):(a.css("max-height",s),a.siblings(".collapser").html('<img src="/assets/expand-33578f8c0c2f357a9c15d7217df079e75382ccb43ef83e55b92ea2e314a82955.png" alt="Expand 33578f8c0c2f357a9c15d7217df079e75382ccb43ef83e55b92ea2e314a82955" />'))}),$(".dial").knob({width:120,height:120,thickness:.2,bgColor:"rgba(255,255,255,0.2)",readOnly:!0}),$(".dial").css("font-size","40pt").css("height","120px").css("width","120px").css("margin","0 0 0 -120px"),$(".detail-container").css("height",$(".hltb-container").css("height")),$(".price-list-pkg-contents .list-container").each(function(e,a){""==$(a).children("ul").text().replace(/\s*/,"")&&$(a).prepend('<tr><td class="empty" style="padding-left:10px;">(none)</td></tr>')}),$(".description-container img").each(function(e,a){$(a).wrap('<div class="img-container"></div>')});var o=350,r=500;$(".unlisted .table-container").each(function(e,a){$(a).css("height",r-$(a).siblings(".price-list-heading").outerHeight()+"px")}),$(".game-entry, .show-original").click(function(){$(".dlc .table-container, .unlisted .table-container").each(function(e,a){$(a).css("height",r-$(a).siblings(".price-list-heading").outerHeight()+"px")}),$(".pkg .table-container").each(function(e,a){$(a).css("height",o-$(a).siblings(".price-list-heading").outerHeight()+"px")})})});
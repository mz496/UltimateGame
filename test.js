var settings={filters:{auto:null}};var page="";var lazy={auto:false,complete:true,loading:false,filter:false,clear:false,page:{data:"",container:"",item:""},params:{by:"time:desc",offset:0,limit:150,filter:""},callback:{before:function(){},after:function(){}},load:function(){if(!this.complete&&!this.loading){this.loading=true;var a=$("#lazyload").html();$("#lazyload").html("Loading… Please wait.");this.callback.before();$.get(this.page.data,this.params,function(b){if(lazy.clear){$(lazy.page.container).children(lazy.page.item).remove();lazy.clear=false}if(b.status=="ok"){if(b.list==""){$("#noDealFound").show()}else{$(b.list).insertBefore("#lazyload")}$("#lazyload").html(a);lazy.complete=b.done;lazy.params.offset=$(lazy.page.item,lazy.page.container).length;if(lazy.complete){$("#lazyload").hide();showNonDeal()}else{$("#lazyload").show()}lazy.callback.after()}else{if(b.status=="timeout"){$("#lazyload").addClass("timeout").html(b.list).unbind("click").click(function(){window.location.reload(true)}).show();lazy.complete=true}}lazy.loading=false;$.fancybox.hideActivity()},"json")}}};$(document).ready(function(){if(!lazy.complete){$("#lazyload").show()}$("#lazyload").click(function(){lazy.load()})});$(document).scroll(function(){if(lazy.auto){var b=$(document).height();var c=$(window).height();var a=$(document).scrollTop();if(a>=b-(2*c)){lazy.load()}}});var allowRestoreHide=false;var rememberFilters=false;var lastHash="";var hash=Array();function buildHash(){var f=[];var e=0;var a="";var c="";var b="";var d=true;if(hash.search!=""){a=hash.search;if(a!=""){f[e++]="/search:"+a;d=false}}c=buildFilterHash();if(c!=""){f[e++]="/filter:"+c;d=false}b=buildOptionHash();if(b!=""){f[e++]="/option:"+b}if(d){$("a.filter.all").addClass("active")}else{$("a.filter.all").removeClass("active")}if(e==0){return"#/"}else{return"#"+f.join(";")}}function parseHash(){hash.search="";hash.filter="";hash.option="";hash.page="";hash.scroll="";var a=window.location.hash.substr(1);var b=a.split(";");for(i in b){var e=b[i].split(":");var c=e[0].substr(1);var d=e[1];for(j=2;j<e.length;j++){d+=":"+e[j]}hash[c]=d}hash.search=hash.search.replace(/\+/g,"%20");return hash}function hashMagic(){hash=parseHash();if(hash.page==""){if(lastHash!=window.location.hash.substr(2)){if(lazy.filter){$.fancybox.showActivity();$("#lazyload").hide();if(hash.search!=""){if($("#searchbox").val()==""){var a=decodeURIComponent(hash.search);$("#searchbox").val(a)}}else{clearSearchbox()}if(hash.filter!=""){filterActivateButtons(hash.filter)}else{clearFilters()}if(hash.option!=""){optionActivateButtons(hash.option);if($("#o-vouchers").hasClass("active")){$("#vouchers").addClass("active")}}else{clearOptions();$("#vouchers").removeClass("active")}lazy.clear=true;lazy.complete=false;lazy.params.offset=0;lazy.params.filter=window.location.hash.substr(1);lazy.load()}else{if(hash.search!=""||hash.filter!=""){if($("#games").length!=0){$("#games").children("div.game").hide()}else{$("div.bundle-container-outer").hide()}}if(hash.search!=""){var a=decodeURIComponent(hash.search);if($("#searchbox").val()==""){$("#searchbox").val(a)}findGame(a)}else{clearSearchbox()}if(hash.filter!=""){filterGames(hash.filter)}else{clearFilters()}}if(hash.scroll!=""){scrollTo(decodeURIComponent(hash.scroll))}lastHash=window.location.hash.substr(2);if(rememberFilters){if(lastHash==""){setCookie("filters","",-1);setCookie("applyFilters","0",-1)}else{setCookie("filters",window.location.hash,2678400);setCookie("applyFilters","1",300)}}presetsHandler();$("#noDealFound").hide();$("#nonDeal").hide();$("#nonDealList").remove();if(allowRestoreHide){$("#restore").slideUp()}$.fancybox.close()}}else{openPage("/ajax/"+hash.page,"ajax")}if(hash.search==""&&hash.filter==""&&hash.page==""){findGame("")}if($("#games").length!=0){if($("#games").children("div.game").filter(":visible").length==0&&!lazy.filter){$("#noDealFound").show()}}else{if($("div.bundle-container-outer").filter(":visible").length==0&&!lazy.filter){$("#noDealFound").show()}}if($("#searchbox").val().length>=3){$("#searchTip").show()}}var highlights={source:"/ajax/data/highlights.php",interval:30000,delay:2000,randomize:0,list:[],status:[]};function initHighlights(){$.getJSON(highlights.source,{randomize:highlights.randomize},function(b){if(b.status=="ok"){highlights.list=b.data;if(highlights.list.length==0){$("#highlights").slideUp();return}for(var c=0;c<4;c++){highlights.status[c]=c;var f=highlights.list[c];var a=(c<2?f.img_292x136:f.img_184x69);var d=$("#highlight-"+c+" a.high-current");var e=sponsoredHighlightHTML(f);d.removeClass("loading").addClass(f["class"]).attr("href","#/page:game/info?plain="+f.plain).attr("title",f.title).css("background-image","url('"+a+"')").html(e+"<div class='priceTag'><div class='priceTagTriangle'></div><div class='priceTagContent "+f.shop+"'>"+f.price+"<div class='gameDealTriangle'></div></div></div>");setNextHighlight(c);if(highlights.interval>=1000&&highlights.delay>=1000){setTimeout(switchHighlights,highlights.interval+((4-c)*highlights.delay),c)}}if(b.action!==null){$.post("/ajax/data/"+b.action)}}else{$("#highlights").slideUp()}})}function setNextHighlight(d){var b=(highlights.status[d]+4)%highlights.list.length;var f=highlights.list[b];var a=(d<2?f.img_292x136:f.img_184x69);var c=$("#highlight-"+d+" a.high-next");var e=sponsoredHighlightHTML(f);c.removeClass("s-low s-low-fs g-low g-low-fs").addClass(f["class"]).attr("href","#/page:game/info?plain="+f.plain).attr("title",f.title).css("background-image","url('"+a+"')").html(e+"<div class='priceTag'><div class='priceTagTriangle'></div><div class='priceTagContent "+f.shop+"'>"+f.price+"<div class='gameDealTriangle'></div></div></div>")}function switchHighlights(c){highlights.status[c]=(highlights.status[c]+4)%highlights.list.length;var d=$("#highlight-"+c+" a.high-current");var b=$("#highlight-"+c+" a.high-next");var a=d.width();d.animate({left:-a},{duration:"fast",easing:"swing",queue:false});b.animate({left:0},{duration:"fast",easing:"swing",queue:false,complete:function(){d.removeClass("high-current").addClass("high-next").css({left:a});b.removeClass("high-next").addClass("high-current");setNextHighlight(c)}});setTimeout(switchHighlights,highlights.interval,c)}function sponsoredHighlightHTML(a){if(a.sponsored){return"<div class='sponsored'><div class='sp_info'>Exclusive "+a.sponsored_voucher_cut+"% off voucher</div><div class='sp_voucher'>"+a.sponsored_voucher+"</div></div>"}return""}function isHashEmpty(){return window.location.hash==""||window.location.hash=="#"||window.location.hash=="#/"}$(document).ready(function(){var b=$("#ledgeContainer").outerHeight();if(b>=80){$("#ledge").css({width:"auto","min-width":"940px",padding:"0px 50px"});b=$("#ledgeContainer").outerHeight()}$("#headerContainer").css("margin-top",b);if(page=="index"){initHighlights()}rememberFilters=$("#gamelist").hasClass("remember-filters");if(rememberFilters){var c=getCookie("filters");if(c!=null){c=unescape(c);if(c!=window.location.hash){var a=getCookie("applyFilters");if(a!=null&&a!=0&&isHashEmpty()){window.location.hash=c.substr(1)}else{$("#restore").show();$("#restore a").attr("href",c).click(function(){$("a.filter.all").removeClass("active")})}}}if(settings.filters.auto!=null&&isHashEmpty()){window.location.hash=settings.filters.auto}}else{setCookie("applyFilters","0",-1)}hashMagic();allowRestoreHide=true;$("a.preset").click(function(){clearFilters();$(this).addClass("active")});$("#savePreset").click(function(){window.location.hash="#/page:user/account/presets?hash="+encodeURIComponent(encodeURIComponent(window.location.hash))});$("a.filter").not(".all").click(toggleFilter);$("#vouchers").click(function(){$("#o-vouchers").toggleClass("active");if($("#o-vouchers").hasClass("active")){$(this).addClass("active")}else{$(this).removeClass("active")}hash=parseHash();$(this).attr("href",buildHash())})});if("onhashchange" in window){window.onhashchange=hashMagic}function presetsHandler(){$("a.preset.active").removeClass("active");var a=false;$("a.preset").each(function(){if($(this).attr("href").substr(2)==lastHash){$(this).addClass("active");a=true;return false}});if(a||lastHash==""){$("#savePreset").hide()}else{$("#savePreset").show().css("display","block")}}function combineFilters(){var b=$("#combined-filter");var c=b.attr("filter-value");var d="";if(c!=""){d="."}c=c+d+hash.filter;var a=1;for(i in c){if(c[i]=="."){a++}}b.attr("filter-value",c).attr("href","#/filter:"+c);$(".filterName",b).text(a+" filter groups");window.location.hash="/"}function combineClear(){var a=$("#combined-filter");a.attr("filter-value","").attr("href","#/");$(".filterName",a).text("No filter added")}function combineHelp(){var a=introJs();a.setOptions({steps:[{element:"#combinedBox",intro:"Combined filters allows you to create filter groups which are applied independently on each other.",position:"left"},{element:"#filters",intro:"Start by select filters you want to use. Either store filters…",position:"left"},{element:"#filtersAdvanced",intro:"…or advanced filters, as usual",position:"left"},{element:"#combinedBox",intro:"Now add selected filters as first group. Add any number of groups you want.",position:"left"},{element:"#combinedBox",intro:"When you are ready, you can use your filter.",position:"left"},{element:"#presets",intro:"You can save combined filter to your Presets for future use.",position:"left"}]});a.start()}function vouchersHelp(){var a=introJs();a.setOptions({steps:[{element:"#vouchers",intro:"You can apply current vouchers and see updated prices in the deals list below. All prices with applied vouchers will have asteriks (*) in front of them.<br /><br />Please note that if the voucher is catalog-wide some games might be excluded from it and this won't be reflected.",position:"right"},{element:"#filtersAdvanced",intro:"With applied vouchers, all filters work as expected. Price cut and historical lows are also updated when you apply vouchers.",position:"left"},{element:"a.filter.voucher",intro:'If you want to see only games with updated prices, you can use "Only with voucher" filter. This filter will work only if you applied vouchers.',position:"left"}]});a.start()}function filterActivateButtons(e){var a=e.split(".");if(a.length>1){return}var d=e.split(",");for(i in d){var c=d[i];if(c[0]=="&"){c=c.substr(1)}if(c==""){continue}switch(c){case"price/0/5":c="under5";break;case"price/0/10":c="under10";break;case"cut/50/100":c="cut50";break;case"cut/75/100":c="cut75";break}var b=/^[a-zA-Z0-9-_]+$/;if(b.test(c)){$("a.filter."+c).addClass("active")}}}function optionActivateButtons(a){var c=a.split(",");for(i in c){var d=c[i];var b=/^[a-zA-Z0-9-_]+$/;if(b.test(d)){$("#o-"+d).addClass("active")}}}function filterGames(c){var b=c.split(",");var a="games";var d;if($("#games").length!=0){a="games";d=$("#games").children("div.game")}else{a="specials";d=$("div.bundle-container-outer")}for(i in b){filterParts=b[i].split("/");if(b[i][0]=="&"){name=filterParts[0].substr(1);context=d.filter(":visible");context.addClass("filterContext").hide()}else{name=filterParts[0];context=d}switch(name){case"steamworks":case"inWaitlist":case"inCollection":case"inDeal":case"successful":case"package":case"dlc":case"greenlit":filterTag(context,name);break;case"hidedlc":case"hidesuccessful":case"hideinWaitlist":case"hideinCollection":case"hidecollected":case"hidegreenlit":filterWithoutTag(context,name);break;case"hidemac":filterHideMacOnly(context);break;case"last24":case"last48":case"week":filterDay(context,name);break;case"price":filterPrice(context,filterParts[1],filterParts[2]);break;case"cut":filterCut(context,filterParts[1],filterParts[2]);break;case"hideseen":filterHideSeen(context);break;case"multi":filterMulti(context);break;case"hideowned":filterHideOwned(context);break;case"bundle":case"regular":case"voucher":case"other":filterSpecials(context,name);break;case"cretail":case"cother":filterShop(context,name.substr(1));break;default:filterShop(context,name);break}if(a=="games"){$("#games").children("div.filterContext").removeClass("filterContext")}else{$("div.filterContext").removeClass("filterContext")}}}function filterMulti(a){a.each(function(){if($(this).children("div.deals").children("a").length>1){$(this).show()}});$("a.filter.multi").addClass("active")}function filterShop(a,b){a.has("div.deals > a."+b).show();$("a.filter."+b).addClass("active")}function filterTag(b,a){b.has("div.details > a."+a).show();$("a.filter."+a).addClass("active")}function filterWithoutTag(b,a){a=a.substring(4);b.not(":has(."+a+")").show();$("a.filter.hide"+a).addClass("active")}function filterHideSeen(a){a.not(".seen").show();$("a.filter.hideseen").addClass("active")}function filterHideMacOnly(a){var b=/\WMac(\W|$)/i;var c=/\WPC(\W|$)/i;a.children("div.title").each(function(){var d=$(this).text();if(!b.test(d)||c.test(d)){$(this).parent().show()}});$("a.filter.hidemac").addClass("active")}function filterDay(b,a){b.has("span.last24").show();if(a!="last24"){b.has("span.last48").show()}if(a=="week"){b.has("span.week").show()}$("a.filter."+a).addClass("active")}function filterPrice(b,a,d){var c=/\d+(\.|,)\d+/;b.find("div.deals").each(function(){var e=$("a:last",this).text();var f=e.match(c);e=f[0];e=parseFloat(e.replace(",","."));if(e<d&&e>a){$(this).closest("div.game").show()}});if(a==0&&d==5){$("a.filter.under5").addClass("active")}else{if(a==0&&d==10){$("a.filter.under10").addClass("active")}}}function filterCut(b,a,c){b.find("span.cut").each(function(){var d=parseInt($(this).text());if(d>=a&&d<=c){$(this).closest("div.game").show()}});if(a==50&&c==100){$("a.filter.cut50").addClass("active")}else{if(a==75&&c==100){$("a.filter.cut75").addClass("active")}}}function filterSpecials(a,b){a.filter("."+b).show();$("a.filter.special_"+b+"s").addClass("active")}function filterHideOwned(a){a.not(".owned").show();$("a.filter.hideowned").addClass("active")}function clearFilters(){$("a.filter").removeClass("active")}function clearOptions(){$("a.option").removeClass("active")}function buildFilterHash(){var a="";$("a.filter[filter]").each(function(){if($(this).hasClass("active")){if(a!=""){a+=",";if($(this).parent().parent().hasClass("restrictive")){a+="&"}}a+=$(this).attr("filter")}});return a}function buildOptionHash(){var a="";$("a.filter[option]").each(function(){if($(this).hasClass("active")){if(a!=""){a+=","}a+=$(this).attr("option")}});return a}function toggleFilter(){hash=parseHash();$(this).toggleClass("active").attr("href",buildHash())}function findGame(b){var c;if($("#games").length!=0){c=$("#games").children("div.game")}else{c=$("div.bundle-container-outer")}if(b==""){c.show();$("a.filter.all").addClass("active")}else{if(b[0]=="#"){b=b.substr(1)}else{b=b.replace("(","\\(");b=b.replace(")","\\)");b=b.replace("[","\\[");b=b.replace("]","\\]")}var a=new RegExp(b,"i");c.children("div.title").each(function(){if(a.test($.trim($(this).text()))){$(this).parent().show()}})}}function clearSearchbox(){$("#searchbox").val("");$("#searchTip").hide()}function initSearch(){var a=$("#searchbox").val();if(a==""){hash.search=""}else{hash.search=encodeURIComponent(a)}window.location.hash=buildHash()+";/scroll:%23gamelist";if("onhashchange" in window){}else{$("#games").children("div.game").hide();findGame(a);scrollTo("#gamelist")}}$(document).ready(function(){$("#searchbox").keyup(function(a){$("#searchTip").show();if(a.which==13){initSearch()}});$("#searchboxAction").click(function(){initSearch()})});function scrollTo(a){$("html,body").animate({scrollTop:$(a).offset().top-50})}function submitForm(a,c,b){if(typeof b!=undefined&&b){if(!confirmPopup(b)){return false}}$.fancybox.showActivity();$.post($(a).attr("action"),$(a).serialize()+"&"+c+"=submit",function(d){openPage(d,null);$.fancybox.hideActivity()})}function submitFormTo(a,c,b){$.fancybox.showActivity();$.post(b,$(a).serialize()+"&"+c+"=submit",function(d){openPage(d,null,false);$.fancybox.hideActivity()})}function confirmPopup(c,a){var b=confirm(c);if(b&&typeof a=="function"){a()}return b}function openPage(g,d,e){if(typeof e==undefined||e){var c=g.split("?");var h=c[0];if(c.length!=1){var a=c[1].split("=");var b=a[0];var f=encodeURIComponent(a[1]);h+="?"+b+"="+f}}else{h=g}$(document).ready(function(){$.fancybox(h,{type:d,padding:0,transitionIn:"none",transitionOut:"none",changeSpeed:0,changeFade:0,enableEscapeButton:true,hideOnOverlayClick:false,onStart:function(){$("#fancybox-close").unbind("click",closePage).bind("click",closePage);$("#fancybox-loading").unbind("click",closePage).bind("click",closePage)},onComplete:function(){pageOpened();$("#fancybox-wrap").css("margin-top",($(document).scrollTop())+"px")},onClosed:function(){closePage()}})})}function closePage(){window.location.hash="/"+lastHash}function pageOpened(){}function trLink(b,a){if(b.target instanceof HTMLAnchorElement||b.target instanceof HTMLInputElement){return}document.location.href=a}function getGoogleCharts(){if(typeof google!="object"){var a=document.createElement("script");a.src="https://www.google.com/jsapi?callback=loadCharts";a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a)}else{loadCharts()}}function loadCharts(){if(typeof google.visualization!="object"){google.load("visualization","1",{packages:["corechart"],callback:"drawChart"})}else{drawChart()}}function showNonDeal(){if($("#nonDeal").length!=0&&$("#searchbox").val().length>=3){getNonDeal();$("#nonDeal").show()}}function getNonDeal(){$("#nonDealLoading").show();$.get("/ajax/nondeal.php",lazy.params,function(a){$("#nonDealList").remove();$(a).insertAfter("#nonDeal");$("#nonDealLoading").hide()})}$(document).ready(function(){$("#games").on("mouseover","div.deals > a",function(){var a=$(this).closest("div.game");var b=a.children("div.details");var d=$(this).attr("shop");b.find("span.text").hide();b.find("span.tab").show();var c=b.find("a."+d);c.find("span.text").show();c.find("span.tab").hide()})});var fadeInProgress=[];function generalRemove(d,c,e,a){if(fadeInProgress.hasOwnProperty(c)&&fadeInProgress[c]){return}fadeInProgress[c]=true;if(e!=""){$.get(e)}var b=$(d).closest("div.game");$(".title",b).fadeTo(400,0.3);$(".deals,.details",b).fadeOut();$(".options",b).fadeOut(400,function(){b.addClass("removed").append(a);$(".removed-options",b).fadeIn();fadeInProgress[c]=false})}function undoGeneralRemove(c,b){var a=$(c).closest("div.game");$(".title",a).fadeTo(400,1);$(".removed-options",a).fadeOut(400,function(){a.removeClass("removed");$(this).remove();$(".options,.deals,.details",a).fadeIn()})}function generalOptionsChange(b,d,f,l,g){var a=$(b).closest("div.game");if(a.data("loading")===true){return}a.data("loading",true);if($("div.hidden-options",a).length==0){a.append("<div class='hidden-options'></div>")}$("div.hidden-options",a).html("loading&hellip;");var c=true;var k=true;var e=null;function h(){a.data("loading",false);if(e=="ok"&&typeof l=="function"){l(a)}if(e=="error"&&typeof g=="function"){g(a)}}$.post(d,f,function(m){$("div.hidden-options",a).html(m.message);e=m.status;c=false;if(!k){h()}},"json");$("div.details",a).fadeOut();$("div.options",a).fadeOut(400,function(){$("div.hidden-options",a).fadeIn();k=false;if(!c){h()}})}function generalOptionsBack(b){var a=$(b).closest("div.game");if(a.data("loading")===true){return}$("div.hidden-options",a).fadeOut(400,function(){$(this).remove();$("div.options,div.details",a).fadeIn()})}function waitAdd(b,a){var c={plains:[a]};generalOptionsChange(b,"/ajax/data/wait.add.php",c,function(d){if($("a.tag.inWaitlist",d).length!=0){return}$("a.tag",d).addClass("correctPadding");var f=$("div.title > a",d).text();var e='<a href="/waitlist/#/search:'+encodeURIComponent("^"+f.trim()+"$")+'" class="detail tag inWaitlist"><div class="gameDetailTriangle"></div><div class="detailContent">In Waitlist</div></a>';$(e).insertBefore($("a.detail:not(.tag):first",d))})}function waitAddUndo(b,a){var c={plains:[a]};generalOptionsChange(b,"/ajax/data/wait.add.undo.php",c,function(d){$("a.tag.inWaitlist",d).remove()})}function ignoreGame(d,c,b){var e;var a;if(b){e="/ajax/ignoreGame.php?plain="+c;a="<div class='removed-options'>Added to your <a href='/ignored/'>Ignore list</a>. After refresh, you won't see deals for this game anymore. <a href='javascript:void(0);' onClick=\"undoIgnore(this, '"+c+"');\">Undo</a></div>"}else{e="";a="<div class='removed-options'>You have to <a href=\"javascript:openPage('/ajax/user/account/restricted', 'ajax');\">log in</a> to be able to add this game to your <a href='/ignored/'>Ignore list</a>. <a href='javascript:void(0);' onClick=\"undoIgnore(this, '"+c+"');\">Undo</a></div>"}generalRemove(d,c,e,a)}function undoIgnore(b,a){$.get("/ajax/ignoreUndo.php?plain="+a);undoGeneralRemove(b,a)}function removeIgnored(c,b){var d="/ajax/ignoreUndo.php?plain="+b;var a="<div class='removed-options'>Removed from your <b>Ignore list</b>. <a href='javascript:void(0);' onClick=\"undoRemoveIgnored(this, '"+b+"');\">Undo</a></div>";generalRemove(c,b,d,a)}function undoRemoveIgnored(b,a){$.get("/ajax/ignoreGame.php?plain="+a);undoGeneralRemove(b,a)}function collectionRemove(c,b){var d="/ajax/collectionRemove.php?plain="+b;var a="<div class='removed-options'>Removed from your <b>Collection</b>. <a href='javascript:void(0);' onClick=\"undoCollectionRemove(this, '"+b+"');\">Undo</a></div>";generalRemove(c,b,d,a)}function undoCollectionRemove(b,a){$.get("/ajax/collectionRemoveUndo.php?plain="+a);undoGeneralRemove(b,a)}function removeWaitlisted(d,c){var e="/ajax/data/wait.remove.php?plain="+c;var a="<div class='removed-options'>Removed from your <b>Waitlist</b>. <a href='javascript:void(0);' onClick=\"undoRemoveWaitlisted(this, '"+c+"');\">Undo</a></div>";generalRemove(d,c,e,a);var b=$(d).closest("div.game");b.unbind("click").removeClass("picked");$(".title input",b).fadeOut(400,function(){$(this).css({display:"inline",visibility:"hidden"})}).attr("checked",false)}function undoRemoveWaitlisted(b,a){$.get("/ajax/data/wait.remove.undo.php?plain="+a,function(c){if(c.status=="ok"){$(".title input",$(b).closest("div.game")).fadeIn(400,function(){$(this).css({display:"inline",visibility:"visible"})}).attr("checked",false);undoGeneralRemove(b,a)}else{$("div.removed-options",$(b).closest("div.game")).html(c.message).addClass("c-err")}},"json")}function toggleWaitlistItemClass(a){if($("input[type=checkbox]",a).attr("checked")=="checked"){a.addClass("picked")}else{a.removeClass("picked")}updateWaitlistSelectCount()}$(document).ready(function(){$(".waitlist-item input[type=checkbox]").change(function(){toggleWaitlistItemClass($(this).closest(".waitlist-item"))});$(".waitlist-item").click(function(b){if(b.target==b.currentTarget){var a=$("input[type=checkbox]",this);a.attr("checked",!(a.attr("checked")=="checked"));toggleWaitlistItemClass($(this))}})});function selectVisibleWaitlistItems(){$(".waitlist-item:visible:not(.removed)").each(function(){$("input[type=checkbox]",this).attr("checked",true);toggleWaitlistItemClass($(this))})}function deselectVisibleWaitlistItems(){$(".waitlist-item:visible").each(function(){$("input[type=checkbox]",this).attr("checked",false);toggleWaitlistItemClass($(this))})}function updateWaitlistSelectCount(){var a=$("div.picked").length;if(a==0){$("#selectedCount").text("")}else{$("#selectedCount").text(a+" selected")}}function showDetails(c){var b=$(c).closest("div.bundle-container-outer");var d=$("div.bundle-content",b);function a(){b.addClass("open");d.slideDown()}if(b.data("loaded")==true){a()}else{$.fancybox.showActivity();$.get("/ajax/data/specials.content.php",{id:b.data("id")},function(e){b.data("loaded",true);d.html(e);$.fancybox.hideActivity();a()})}}function hideDetails(b){var a=$(b).closest("div.bundle-container-outer");var c=$("div.bundle-content",a);c.slideUp(null,function(){a.removeClass("open")})}function showDiff(b){var a=$(b).closest("div.bundle-content");$("div.bundle-diff",a).slideDown();var c=$(b).closest("div.bundle-diff-control");$(b).hide();$("a.bundle-diff-hide",a).show()}function hideDiff(b){var a=$(b).closest("div.bundle-content");$("div.bundle-diff",a).slideUp(400,function(){var c=$(b).closest("div.bundle-diff-control");$(b).hide();$("a.bundle-diff-show",a).show()})}$(document).ready(function(){$("#bpListControl").click(function(){$("#bpListControl").slideUp();$("#bpListMore").slideDown()})});$(document).ready(function(){$("textarea.markdown-live").keyup(function(){var a=$($(this).data("preview"));$.post("/ajax/data/markdown.preview.php",{content:$(this).val()},function(b){if(b.status=="ok"){if(b.data!=""){$("div.message-preview-content",a).html(b.data);a.slideDown()}else{a.slideUp()}}else{a.slideUp()}},"json")})});function showKickstarterVideo(c){var b=$(c).parent().parent().parent().parent();var a=$(".title a",b).attr("href");$(".videoContainer",b).html('<iframe width="640" height="480" src="'+a+'/widget/video.html" frameborder="0"> </iframe>').slideDown()}function setCookie(c,e,d){var a;if(d){var b=new Date();b.setTime(b.getTime()+(d*1000));a="; expires="+b.toGMTString()}else{a=""}document.cookie=c+"="+escape(e)+a+"; path=/"}function getCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function gaEvent(b,c,a){_gaq.push(["_trackEvent",b,c,a])};